<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mir: Mir hacking guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mir
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Mir hacking guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md3"></a>
Coding &lt;em&gt;Mir&lt;/em&gt;</h1>
<p>There's a *__coding style guide__* in the guides subdirectory. To build it into an <em>html</em> file: </p><pre class="fragment">$ make guides
</pre><p> (Or if you're reading the web version <a href="cppguide/index.html">here</a>).</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Code structure</h1>
<p>*__Code structure: include__*</p>
<p>The include subdirectory contains header files "published" by corresponding parts of the system. For example, <em>include/mir/option/option.h</em> provides a system-wide interface for accessing runtime options published by the options component.</p>
<p>In many cases, there will be interfaces defined that are used by the component and implemented elsewhere. <em>E.g. the compositor uses RenderView which is implemented by the surfaces component.</em></p>
<p>Files under the include directory should contain minimal implementation detail: interfaces should not expose platform or implementation technology types <em>etc.</em> (And as public methods are normally implementations of interfaces they do not use these types.)</p>
<p>*__Code structure: src__*</p>
<p>This comprises the implementation of <em>Mir</em>. Header files for use within the component should be put here. The only headers from the source tree that should be included are ones from the current component (ones that do not require a path component).</p>
<p>*__Code structure: test__*</p>
<p>This contains unit, integration and acceptance tests written using <em>gtest/gmock</em>. Tests largely depend upon the public interfaces of components - but tests of units within a component will include headers from within the source tree.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Error handling strategy</h1>
<p>If a function cannot meet its post-conditions it throws an exception and meets <b>AT LEAST</b> the basic exception safety guarantee. It is a good idea to document the strong and no-throw guarantees._http://www.boost.org/community/exception_safety.html_</p>
<p>A function is not required to check its preconditions (there should be no tests that preconditions failures are reported). This means that preconditions may be verified using the "*assert"* macro - which may or may not report problems (depending upon the <b>NDEBUG</b> define).</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Implicit rules</h1>
<p>There are a lot of <b>pointers</b> (mostly smart, but a few raw ones) passed around in the code. We have adopted the general rule that pointers are expected to refer to valid objects. This avoids repetitive tests for validity. Unless otherwise documented functions and constructors that take pointer parameters have validity of the referenced objects as a precondition. Exceptions to the rule must be of limited scope and documented.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Running &lt;em&gt;Mir&lt;/em&gt;</h1>
<p>There are some brief guides describing how to run the <em>Mir binaries</em> once you have them built. You might think it's obvious but there are some important things you need to know to get it working, and also to prevent your existing <em>X server</em> from dying at the same time.</p>
<ul>
<li>*<a class="el" href="getting_and_using_mir.html">Getting and Using Mir</a>*</li>
</ul>
<p>You can configure <em>Mir</em> to provide runtime information helpful for debugging by enabling component reports:</p>
<ul>
<li>*<a class="el" href="component_reports.html">Mir component reports</a>*</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
Documentation</h1>
<p>There are <em>design notes</em> and an <em>architecture diagram</em> (.dia) in the design subdirectory. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<hr>
<p align="center">Copyright &copy; 2012-2022
 Canonical Ltd. <br />
Generated on Fri Aug 26 13:27:37 UTC 2022
<br />
This documentation is licensed under the GPL version 2 or 3.</p>
</body>
</html>
