<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mir: Mir component reports</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mir
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Mir component reports </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Both the server library and the client library include facilities to provide debugging and tracing information at runtime. This is achieved through component reports, which are sets of interesting events provided by many Mir components. A component report can be usually handled in a number of different ways, configured using command-line options and/or environment variables. By default, component reports are turned off.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Server reports</h1>
<p>The way component reports are handled on the server can be configured using either command-line options or environment variables. The environment variables are prefixed with <code>MIR_SERVER_</code> and contain underscores ('_') instead of dashes ('-'). The available component reports and handlers for the server are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Environment variable </th><th class="markdownTableHeadNone">Command line option </th><th class="markdownTableHeadNone">Handlers  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MIR_SERVER_COMPOSITOR_REPORT </td><td class="markdownTableBodyNone">&ndash;compositor-report </td><td class="markdownTableBodyNone">log,lttng  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MIR_SERVER_DISPLAY_REPORT </td><td class="markdownTableBodyNone">&ndash;display-report </td><td class="markdownTableBodyNone">log,lttng  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MIR_SERVER_INPUT_REPORT </td><td class="markdownTableBodyNone">&ndash;input-report </td><td class="markdownTableBodyNone">log,lttng  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MIR_SERVER_LEGACY_INPUT_REPORT </td><td class="markdownTableBodyNone">&ndash;legacy-input-report </td><td class="markdownTableBodyNone">log  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MIR_SERVER_SEAT_REPORT </td><td class="markdownTableBodyNone">&ndash;seat-report </td><td class="markdownTableBodyNone">log  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MIR_SERVER_SCENE_REPORT </td><td class="markdownTableBodyNone">&ndash;scene-report </td><td class="markdownTableBodyNone">log,lttng  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MIR_SERVER_SHARED_LIBRARY_PROBER_REPORT </td><td class="markdownTableBodyNone">&ndash;shared-library-prober-report </td><td class="markdownTableBodyNone">log,lttng  </td></tr>
</table>
<p>For example, to enable the LTTng input report, one could either use the <code>--input-report=lttng</code> command-line option to the server, or set the <code>MIR_SERVER_INPUT_REPORT=lttng</code> environment variable.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
LTTng support</h1>
<p>Mir provides LTTng tracepoints for various interesting events. You can enable LTTng tracing for a Mir component by using the corresponding command-line option or environment variable for that component's report: </p><pre class="fragment">$ lttng create mirsession -o /tmp/mirsession
$ lttng enable-event -u -a
$ lttng start
$ mir_demo_server --compositor-report=lttng
$ lttng stop
$ babeltrace /tmp/mirsession/&lt;trace-subdir&gt;
</pre><p>LTTng-UST versions up to and including 2.1.2, and up to and including 2.2-rc2 contain a bug (lttng #538) that prevents event recording if the tracepoint provider is dlopen()-ed at runtime, like in the case of Mir. If you have a version of LTTng affected by this bug, you need to preload the server tracepoint provider library: </p><pre class="fragment">$ LD_PRELOAD=libmirserverlttng.so mir_demo_server --compositor-report=lttng
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<hr>
<p align="center">Copyright &copy; 2012-2022
 Canonical Ltd. <br />
Generated on Thu Feb 24 10:34:44 UTC 2022
<br />
This documentation is licensed under the GPL version 2 or 3.</p>
</body>
</html>
